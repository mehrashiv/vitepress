import{_ as e,c as t,o as i,a4 as a}from"./chunks/framework.BGrCVxvP.js";const f=JSON.parse('{"title":"RADIUS Integration","description":"","frontmatter":{},"headers":[],"relativePath":"integrationradius.md","filePath":"integrationradius.md"}'),n={name:"integrationradius.md"},r=a(`<h1 id="radius-integration" tabindex="-1">RADIUS Integration <a class="header-anchor" href="#radius-integration" aria-label="Permalink to &quot;RADIUS Integration&quot;">​</a></h1><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>Nile can integrate with an external RADIUS server for:</p><ol><li>802.1x Authentication</li><li>MAC Authentication</li><li>Guest Access</li><li>UPSK Integration</li></ol><h3 id="general-concepts" tabindex="-1">General Concepts <a class="header-anchor" href="#general-concepts" aria-label="Permalink to &quot;General Concepts&quot;">​</a></h3><p>As seen in the screenshot the following parameters can be configured.</p><ol><li>Name - Mandatory - A unique name for the RADIUS Server group</li><li>Port - Mandatory - Usually its 1812</li><li>Shared Secret - Mandatory - The same key needs to be configured on the RADIUS Server Side</li><li>Host 1 - Mandatory - The first RADIUS server in the list</li><li>Host 2 - Optional - The second RADIUS server in the list</li><li>Host 3 - Optional - The third RADIUS server in the list</li><li>Geoscope - Mandatory - Which sites this RADIUS server serves</li><li>Verify Hosts - Optional - MSCHAP-PEAPv2 username and password</li><li>Display NAS IP&#39;s - Nile&#39;s IP from where the request will originate. To set NAST IP in the RADIUS server</li><li>Guest Portal URLs - This is leveraged for Guest Access</li><li>Wired MAC Auth - Use this RADIUS Server for MAC authentication</li></ol><h4 id="redundancy" tabindex="-1">Redundancy <a class="header-anchor" href="#redundancy" aria-label="Permalink to &quot;Redundancy&quot;">​</a></h4><p>If two or more hosts are configured, Nile will send the authentication request only to the first host. If Host 1 is down, Nile will send the authentication request to Host 2 else Host 3. If Host 1 comes online, Nile will move back to Host 1.</p><h4 id="proactive-monitoring" tabindex="-1">Proactive Monitoring <a class="header-anchor" href="#proactive-monitoring" aria-label="Permalink to &quot;Proactive Monitoring&quot;">​</a></h4><p>Nile will monitor all 3 servers every minute. We will report latency and up/down status for each RADIUS server. Nile can use accounting transactions to monitor or MSCHAPv2 username and password provided by the admin. Please note using PEAP will fill up the logs on the RADIUS server.</p><h2 id="_802-1x-authentication" tabindex="-1">802.1x Authentication <a class="header-anchor" href="#_802-1x-authentication" aria-label="Permalink to &quot;802.1x Authentication&quot;">​</a></h2><p>Nile is a passthrough for all 802.1x transactions wired or wireless. The end user device and the RADIUS server exchange EAP messages to authenticate each other. So, any EAP method can be used as Nile is transparent</p><h3 id="wireless-802-1x-authentication" tabindex="-1">Wireless 802.1x Authentication <a class="header-anchor" href="#wireless-802-1x-authentication" aria-label="Permalink to &quot;Wireless 802.1x Authentication&quot;">​</a></h3><p>In some use cases an SSID can be mapped to multiple segments. In such a scenario it is Mandatory for the RADIUS server to send back segment name which is an exact match to the Segment configured in Nile. This can be done either by using the Vendors Specific Attribute (Nile Dictionary file) or Standard RADIUS attribute of VLAN ID. Following is an example: SSID Name - Denver Univ Segments Mapped - Teacher, Student Auth Type - 802.1x</p><p>The expectation is when a student connects to the SSID, they should be on the <strong>Student</strong> segment and when a Teacher connects to the SSID they should be on the <strong>Teacher</strong> segment. Since the Authentication is done by the RADIUS server it needs to send us the exact text <strong>Student</strong> or <strong>Teacher</strong>.</p><h4 id="vendor-specific-attribute-nile-dictionary-file" tabindex="-1">Vendor Specific Attribute (Nile Dictionary File) <a class="header-anchor" href="#vendor-specific-attribute-nile-dictionary-file" aria-label="Permalink to &quot;Vendor Specific Attribute (Nile Dictionary File)&quot;">​</a></h4><p>The Nile dictionary file needs to be uploaded into the RADIUS server and the netseg attribute needs to be leverage e.g. netseg=Teacher or netseg=Student The netseg value is case sensitive hence the case should match the segment configured in Nile Portal</p><p>If the netseg value is null or incorrect then the device will fail authentication with the appropriate message</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>VENDOR  Nile    58313</span></span>
<span class="line"><span></span></span>
<span class="line"><span>BEGIN-VENDOR    Nile</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ATTRIBUTE       redirect-url    1       string</span></span>
<span class="line"><span>ATTRIBUTE       netseg          2       string</span></span>
<span class="line"><span>ATTRIBUTE       nile-avpair     3       string</span></span>
<span class="line"><span></span></span>
<span class="line"><span>END-VENDOR      Nile</span></span></code></pre></div><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>If the SSID is mapped to only one segment then the Nile dictionary file is not required or if used netseg can be set to null.</p></div><h4 id="standard-radius-attribute" tabindex="-1">Standard RADIUS Attribute <a class="header-anchor" href="#standard-radius-attribute" aria-label="Permalink to &quot;Standard RADIUS Attribute&quot;">​</a></h4><p>Some RADIUS servers don’t support uploading a Dictionary file. Hence the segment name can be sent using the standard RADIUS attribute <code>TunnelPrivateGroupID_Lookup</code></p><h3 id="wired-802-1x" tabindex="-1">Wired 802.1x <a class="header-anchor" href="#wired-802-1x" aria-label="Permalink to &quot;Wired 802.1x&quot;">​</a></h3><p>All ports on a Nile Switch are blocked by default. When a device plugs in to a Nile Switch it must be authorized by 802.1x or MAC Auth. If the device is configured for 802.1x, Nile is pass through just like it is for Wireless.</p><p>There is no port level config on Nile Switches, hence when using wired 802.1x it is <strong>required</strong> that the RADIUS server send a segment back using the VSA or <code>TunnelPrivateGroupID_Lookup</code> as described in the previous section.</p><h2 id="mac-authentication" tabindex="-1">MAC Authentication <a class="header-anchor" href="#mac-authentication" aria-label="Permalink to &quot;MAC Authentication&quot;">​</a></h2><p>Nile has built-in MAC authentication at no extra cost. As mentioned earlier, every device that plugs in to Nile must be authorized either by 802.1x or MAC Auth. The MAC auth can be either with Nile or an external RADIUS server. For authentications with an external RADIUS server, the <strong>Wired MAC AUTH</strong> checkbox needs to be checked when creating a RADIUS Server. Once this is enabled, Nile will authenticate all devices against a RADIUS server.</p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>RADIUS server groups can be mapped to single or multiple sites. If there are multiple RADIUS server groups for the same site, only one of them can be marked with <strong>Wired MAC AUTH</strong>. Also note a RADIUS server group can have up to 3 servers for redundancy.</p></div><h2 id="guest-access" tabindex="-1">Guest Access <a class="header-anchor" href="#guest-access" aria-label="Permalink to &quot;Guest Access&quot;">​</a></h2><p>Nile offers 3 diffent solutions for Guest Access</p><ol><li>Integration with External RADIUS server - Nile is passthrough</li><li>Nile Hosted Guest - No external service is required. Admins can create a guest portal using Nile settings but are responsible for isolating the guest traffic after it egresses from Nile</li><li>Secure Guest Service - Bare minimum settings required. Nile tunnels all traffic to a Nile PoP and manages DHCP as well.</li></ol><p>In this section we will focus on Integration with an external RADIUS server There are two methods of integration</p><ol><li>Server Initiated flow</li><li>Nile Initiated flow</li></ol><h3 id="server-initiated" tabindex="-1">Server Initiated <a class="header-anchor" href="#server-initiated" aria-label="Permalink to &quot;Server Initiated&quot;">​</a></h3><p>In this mode, the admin will just configure the RADIUS server in Nile Portal as they do for 802.1x. No additional configuration is required. When a guest connects to a SSID that is mapped to the RADIUS server, following is the flow:</p><ol><li>Guests will get an IP address (assuming, the user is connecting for the very first time)</li><li>In the background, Nile will do a MAC Auth with the external radius server</li><li>Since the RADIUS server is not aware of this MAC address (first time connection), it will send a MAC-Auth success with the Nile VSA <strong>redirec-url</strong>. Nile dictionary import in the RADIUS server is required.</li><li>Nile will leverage the attribute to re-direct the guest user to the portal page. The device will authenticate with RADIUS server via the portal and Nile is transparent to it</li><li>The RADIUS server will then notify Nile with a Success or Reject based on which the user will be allowed or denied access to the network</li></ol><h3 id="controller-initiated-flow" tabindex="-1">Controller Initiated flow <a class="header-anchor" href="#controller-initiated-flow" aria-label="Permalink to &quot;Controller Initiated flow&quot;">​</a></h3><p>In this mode, the admin will configure the RADIUS server in Nile portal but add a guest portal URL. When a guest connects to a SSID that is mapped to the RADIUS server, following is the flow:</p><ol><li>Guests will get an IP address (assuming, the user is connecting for the very first time)</li><li>Since Nile has the re-direct URL configured, we will direct the user to that URL. The device will authenticate with RADIUS server via the portal and Nile is transparent to it</li><li>The RADIUS server will then notify Nile with a Success or Reject based on which the user will be allowed or denied access to the network <strong>Need to figure out how this works</strong></li></ol>`,40),s=[r];function o(l,h,c,d,u,p){return i(),t("div",null,s)}const A=e(n,[["render",o]]);export{f as __pageData,A as default};
